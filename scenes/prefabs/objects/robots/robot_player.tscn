[gd_scene load_steps=39 format=3 uid="uid://d0aeb3rja2yjd"]

[ext_resource type="Script" uid="uid://dx1w5ja65qha1" path="res://scripts/objects/robots/player/robot_player.gd" id="2_gvkxh"]
[ext_resource type="PackedScene" uid="uid://88se3nfd8vrt" path="res://scenes/prefabs/objects/pieces/piece_bodyCube.tscn" id="5_fts0s"]
[ext_resource type="Script" uid="uid://cd3dvyejdjvlg" path="res://scripts/objects/robots/buildingBlocks/body.gd" id="6_py1sw"]
[ext_resource type="Script" uid="uid://crpa3dbgxwyeg" path="res://scripts/objects/weapons/ability_manager.gd" id="7_8qbbb"]
[ext_resource type="PackedScene" uid="uid://dosh155duu70e" path="res://scenes/prefabs/objects/pieces/buildingBlocks/socket.tscn" id="7_fj0lc"]
[ext_resource type="Script" uid="uid://cybmjhuctmfaw" path="res://scripts/libraries/richTextConstructor.gd" id="8_gji2c"]
[ext_resource type="Script" uid="uid://clcmggkeaqnyx" path="res://scripts/objects/weapons/stat_tracker.gd" id="9_l2ggl"]
[ext_resource type="Texture2D" uid="uid://bdgkd60c8qtud" path="res://graphics/images/HUD/statIcons/energyIconStriped.png" id="10_ui24w"]
[ext_resource type="PackedScene" uid="uid://b4adm8wxo7ym0" path="res://scenes/prefabs/objects/robots/buildingBlocks/treads.tscn" id="10_x05dx"]
[ext_resource type="Texture2D" uid="uid://uflissj08i1o" path="res://graphics/images/HUD/statIcons/cooldownIconStriped.png" id="11_8qswc"]
[ext_resource type="Texture2D" uid="uid://s6s6ugfdhqhy" path="res://graphics/images/HUD/statIcons/magazineIconStriped.png" id="12_aau5o"]
[ext_resource type="Texture2D" uid="uid://b775d1fn78gcv" path="res://graphics/images/HUD/statIcons/weightIconStriped.png" id="13_8c3dl"]
[ext_resource type="Texture2D" uid="uid://cnfat2kqvmdcd" path="res://graphics/images/HUD/statIcons/damageIconStriped.png" id="14_keiyc"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_f0k1s"]
friction = 200.0
bounce = 0.3

[sub_resource type="Resource" id="Resource_ek7pi"]
script = ExtResource("8_gji2c")
string = "Regenerates a meagre amount of "
color = 1
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_7q44l"]
script = ExtResource("8_gji2c")
string = "Energy"
color = 5
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_86dur"]
script = ExtResource("8_gji2c")
string = "each second."
color = 1
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_8qbbb"]
load_path = "res://.godot/imported/Repair.png-0b7427a26568a2e2403cc6433717f8a2.ctex"

[sub_resource type="Resource" id="Resource_gji2c"]
script = ExtResource("7_8qbbb")
abilityName = "Generator"
abilityDescriptionConstructor = Array[ExtResource("8_gji2c")]([SubResource("Resource_ek7pi"), SubResource("Resource_7q44l"), SubResource("Resource_86dur")])
abilityDescription = "[color=e0dedeff]Regenerates a meagre amount of [color=789be9ff]Energy [color=e0dedeff]each second."
energyCost = -1.65
cooldownTimeBase = 0.0
cooldownStatName = ""
runType = 0
functionNameWhenUsed = &""
statsUsed = Array[String]([""])
icon = SubResource("CompressedTexture2D_8qbbb")
initialized = true
disabled = false
functionWhenUsed = Callable()
metadata/_custom_type_script = "uid://crpa3dbgxwyeg"

[sub_resource type="Resource" id="Resource_3gd3v"]
script = ExtResource("8_gji2c")
string = "Rotates the top segment of this "
color = 1
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_noc8o"]
script = ExtResource("8_gji2c")
string = "Piece"
color = 0
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_pqjj1"]
script = ExtResource("8_gji2c")
string = "towards your "
color = 1
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_uygn2"]
script = ExtResource("8_gji2c")
string = "crosshair"
color = 0
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_b30ru"]
script = ExtResource("8_gji2c")
string = "."
color = 1
newline = false
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_0rndb"]
script = ExtResource("8_gji2c")
string = "Only works when upright."
color = 8
newline = true
endingSpace = false
startingSpace = true
metadata/_custom_type_script = "uid://cybmjhuctmfaw"

[sub_resource type="Resource" id="Resource_l2ggl"]
script = ExtResource("7_8qbbb")
abilityName = "Target"
abilityDescriptionConstructor = Array[ExtResource("8_gji2c")]([SubResource("Resource_3gd3v"), SubResource("Resource_noc8o"), SubResource("Resource_pqjj1"), SubResource("Resource_uygn2"), SubResource("Resource_b30ru"), SubResource("Resource_0rndb")])
abilityDescription = "[color=e0dedeff]Rotates the top segment of this [color=ffffffff]Piece [color=e0dedeff]towards your [color=ffffffff]crosshair[color=e0dedeff].
[color=f2ec6bff]Only works when upright."
energyCost = 0.1
cooldownTimeBase = 0.0
cooldownStatName = ""
runType = 0
functionNameWhenUsed = &"target"
statsUsed = Array[String](["RotationSpeed"])
initialized = true
disabled = false
functionWhenUsed = Callable()
metadata/_custom_type_script = "uid://crpa3dbgxwyeg"

[sub_resource type="Resource" id="Resource_aau5o"]
resource_name = "ContactCooldown7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Contact Cooldown"
statName = "ContactCooldown7"
statIcon = ExtResource("11_8qswc")
baseStat = 0.0
roundingMode = 0

[sub_resource type="Resource" id="Resource_k5gmj"]
resource_name = "Damage7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Damage"
statName = "Damage7"
statIcon = ExtResource("14_keiyc")
baseStat = 0.0
roundingMode = 0
metadata/_custom_type_script = "uid://crpa3dbgxwyeg"

[sub_resource type="Resource" id="Resource_p8blx"]
resource_name = "Kickback7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Kickback"
statName = "Kickback7"
statIcon = ExtResource("13_8c3dl")
baseStat = 0.0
roundingMode = 0

[sub_resource type="Resource" id="Resource_d0m1c"]
resource_name = "Knockback7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Knockback"
statName = "Knockback7"
statIcon = ExtResource("13_8c3dl")
baseStat = 0.0
roundingMode = 0
metadata/_custom_type_script = "uid://crpa3dbgxwyeg"

[sub_resource type="Resource" id="Resource_8qswc"]
resource_name = "PassiveCooldown7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Passive Cooldown"
statName = "PassiveCooldown7"
statIcon = ExtResource("11_8qswc")
baseStat = 1.0
roundingMode = 0

[sub_resource type="Resource" id="Resource_ui24w"]
resource_name = "PassiveEnergyDraw7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Passive Energy Draw"
statName = "PassiveEnergyDraw7"
statIcon = ExtResource("10_ui24w")
baseStat = 1.0
roundingMode = 0

[sub_resource type="Resource" id="Resource_gwqwr"]
resource_name = "RotationSpeed7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Rotation Speed"
statName = "RotationSpeed7"
statIcon = ExtResource("11_8qswc")
baseStat = 0.9
roundingMode = 0

[sub_resource type="Resource" id="Resource_8c3dl"]
resource_name = "ScrapCost7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Scrap Cost"
statName = "ScrapCost7"
statIcon = ExtResource("12_aau5o")
baseStat = 0.0
roundingMode = 6

[sub_resource type="Resource" id="Resource_l5jgq"]
resource_name = "ScrapSalvageModifier7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Scrap Salvage Modifier"
statName = "ScrapSalvageModifier7"
statIcon = ExtResource("12_aau5o")
baseStat = 0.666667
roundingMode = 0

[sub_resource type="Resource" id="Resource_keiyc"]
resource_name = "ScrapSellModifier7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Scrap Sell Modifier"
statName = "ScrapSellModifier7"
statIcon = ExtResource("12_aau5o")
baseStat = 0.666667
roundingMode = 0

[sub_resource type="Resource" id="Resource_gym66"]
resource_name = "Weight7"
script = ExtResource("9_l2ggl")
statFriendlyName = "Weight"
statName = "Weight7"
statIcon = ExtResource("13_8c3dl")
baseStat = 23.0
roundingMode = 0

[sub_resource type="SphereShape3D" id="SphereShape3D_wy0j3"]

[node name="Robot_Player" type="Node3D" node_paths=PackedStringArray("meshes", "bodyPiece", "bodySocket", "treads", "body")]
visible = false
script = ExtResource("2_gvkxh")
meshes = NodePath("Body/Meshes")
bodyPiece = NodePath("Body/Meshes/Socket/Piece_BodyCube")
bodySocket = NodePath("Body/Meshes/Socket")
robotNameInternal = "Player"
robotName = "Untitled Scrapbot #15"
treads = NodePath("Treads")
startupGenerator = {
&"occupant": {
"res://scenes/prefabs/objects/pieces/piece_bodyCube.tscn": {
"abilityAssignments": {},
"sockets": {
0: {
"occupant": {
"res://scenes/prefabs/objects/pieces/piece_bumper.tscn": {
"abilityAssignments": {},
"sockets": {}
}
},
"rotation": Vector3(1.5708, 0, 0)
},
1: {
"occupant": {
"res://scenes/prefabs/objects/pieces/piece_bumper.tscn": {
"abilityAssignments": {},
"sockets": {}
}
},
"rotation": Vector3(1.5708, 3.14159, 0)
},
2: {
"occupant": "null",
"rotation": Vector3(1.5697, -2.25163, -0.681167)
},
3: {
"occupant": "null",
"rotation": Vector3(1.5697, -2.25158, 2.46048)
},
4: {
"occupant": {
"res://scenes/prefabs/objects/pieces/piece_sawblade.tscn": {
"abilityAssignments": {
"Whirl": Array[int]([2])
},
"sockets": {
0: {
"occupant": {
"res://scenes/prefabs/objects/pieces/piece_cannon.tscn": {
"abilityAssignments": {
"Fire": Array[int]([0])
},
"sockets": {
0: {
"occupant": "null",
"rotation": Vector3(0, 0, 0)
}
}
}
},
"rotation": Vector3(0, 0, 0)
}
}
}
},
"rotation": Vector3(0, 0, 0)
}
}
}
},
&"rotation": Vector3(0, 0, 0)
}
filepathForThisEntity = "res://scenes/prefabs/objects/robots/robot_player.tscn"
body = NodePath("Body")

[node name="Body" type="RigidBody3D" parent="." groups=["Combatant", "Driveable", "Metal"]]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
mass = 100.0
physics_material_override = SubResource("PhysicsMaterial_f0k1s")
gravity_scale = 0.0
can_sleep = false
freeze = true
script = ExtResource("6_py1sw")

[node name="Meshes" type="Node3D" parent="Body"]
transform = Transform3D(0.321359, 0, 0, 0, 0.321359, 0, 0, 0, 0.321359, 0, 0, 0)

[node name="Socket" parent="Body/Meshes" node_paths=PackedStringArray("occupant", "hostRobot", "selectorRayExceptions") instance=ExtResource("7_fj0lc")]
transform = Transform3D(3.11178, 0, 0, 0, 3.11178, 0, 0, 0, 3.11178, 0, 0, 0)
occupant = NodePath("Piece_BodyCube")
hostRobot = NodePath("../../..")
collisionScale = 0.55
selectorRayExceptions = [NodePath("../..")]
dontUsePieceForRobotHost = true

[node name="Piece_BodyCube" parent="Body/Meshes/Socket" node_paths=PackedStringArray("hurtboxCollisionHolder", "hostRobot", "hostSocket") instance=ExtResource("5_fts0s")]
passiveAbilities = Array[ExtResource("7_8qbbb")]([SubResource("Resource_gji2c"), SubResource("Resource_l2ggl")])
hurtboxCollisionHolder = NodePath("HurtboxShapes [Leave empty]")
hostRobot = NodePath("../../../..")
hostSocket = NodePath("..")
assignedToSocket = true
statCollection = Dictionary[String, ExtResource("9_l2ggl")]({
"ContactCooldown7": SubResource("Resource_aau5o"),
"Damage7": SubResource("Resource_k5gmj"),
"Kickback7": SubResource("Resource_p8blx"),
"Knockback7": SubResource("Resource_d0m1c"),
"PassiveCooldown7": SubResource("Resource_8qswc"),
"PassiveEnergyDraw7": SubResource("Resource_ui24w"),
"RotationSpeed7": SubResource("Resource_gwqwr"),
"ScrapCost7": SubResource("Resource_8c3dl"),
"ScrapSalvageModifier7": SubResource("Resource_l5jgq"),
"ScrapSellModifier7": SubResource("Resource_keiyc"),
"Weight7": SubResource("Resource_gym66")
})

[node name="BaseCollision" type="CollisionShape3D" parent="Body"]
shape = SubResource("SphereShape3D_wy0j3")

[node name="Treads" parent="." instance=ExtResource("10_x05dx")]

[connection signal="health_or_energy_changed" from="." to="." method="_on_health_or_energy_changed"]
